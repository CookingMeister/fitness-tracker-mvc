<%- include('partials/header') %>

<!-- <form action="/api/dashboard" method="POST">
    <div class="row mb-3">
      <label for="water" class="col-sm-2 col-form-label">Water</label>
      <div class="col-sm-10">
        <input type="number" class="form-control" placeholder="ounces" name="wtr-amt" id="wtr-amt"></input>
      </div>
    </div>

    <button type="submit" class="btn btn-primary wtr-btn" >Add</button>
</form> -->

<!-- Cards for each Model -->
<div class="container mt-5">
  <h1>Simply Fit</h1>
  <h3 id="date" class="text-center"></h3>
  <hr>
  <div class="row">
    <% categories.forEach((category) => { %>
      <div class="col-md-4 mb-4">
        <div class="card" data-bs-toggle="modal" data-bs-target="#modal<%= category.name %>">
          <div class="card-body text-center">
          <!-- Font Awesome walking man icon -->
          <i class="fas fa-walking fa-2x"></i>
            <h5 class="card-title mt-3"><%= category.name %></h5>
               <!-- Button to open the form modal -->
               <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#formModal<%= category.name %>">
                <i class="fas fa-plus mx-1"></i> Data
              </button>
          </div>
        </div>
      </div>
    <% }) %>
  </div>
</div>

<!-- Info Modals -->
<% categories.forEach((category) => { %>
  <div class="modal fade" id="modal<%= category.name %>" tabindex="-1" aria-labelledby="modalLabel<%= category.name %>" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalLabel<%= category.name %>">Data for <%= category.name %></h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <% if (category.data && category.data.length > 0) { %>
            <% category.data.forEach((item) => { %>
              <p><%= item.id %></p> <!-- the actual attribute you want to display -->
            <% }) %>
          <% } else { %>
            <p>No data available.</p>
          <% } %>
        </div>
      </div>
    </div>
  </div>
<% }) %>

<!-- Form Modals -->
<% categories.forEach((category) => { %>
  <div class="modal fade" id="formModal<%= category.name %>" tabindex="-1" aria-labelledby="formModalLabel<%= category.name %>" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="formModalLabel<%= category.name %>">Update/Add <%= category.name %> Data</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form action="/api/dashboard" method="POST">
            <!-- Form fields for each attribute of the model -->
            <div class="mb-3">
              <label for="attribute1<%= category.name %>" class="form-label">Attribute 1</label>
              <input type="text" class="form-control" id="attribute1<%= category.name %>" name="attribute1">
            </div>
            <!-- Repeat for other attributes -->
            
            <!-- hidden input needed to pass the model ID for updates -->
            <input type="hidden" name="modelId" value="<%= category.id %>">
            
            <button type="submit" class="btn btn-success">
              Submit
              <i class="fas fa-check mx-2"></i>
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
<% }) %>

<script src="../js/dashboard.js"></script>
<script src="../js/date.js"></script>

<%- include('partials/footer') %>